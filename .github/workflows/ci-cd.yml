name: CI/CD Pipeline

# CuÃ¡ndo se ejecuta este workflow
on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

# Trabajos a ejecutar
jobs:
  # Trabajo de CI (IntegraciÃ³n Continua)
  ci:
    runs-on: ubuntu-latest
    
    steps:
    # Paso 1: Descargar el cÃ³digo
    - name: Descargar cÃ³digo
      uses: actions/checkout@v3
    
    # Paso 2: Configurar Node.js
    - name: Configurar Node.js
      uses: actions/setup-node@v3
      with:
        node-version: '18'
    
    # Paso 3: Instalar dependencias
    - name: Instalar dependencias
      run: npm install
    
    # Paso 4: Ejecutar pruebas
    - name: Ejecutar pruebas
      run: npm test
    
    # Paso 5: Construir aplicaciÃ³n (en este caso, solo mostrar archivos)
    - name: Construir aplicaciÃ³n
      run: |
        echo "ğŸ”¨ Construyendo aplicaciÃ³n..."
        ls -la
        echo "âœ… ConstrucciÃ³n completada"
  
  # Trabajo de CD (Despliegue Continuo)
  # Solo se ejecuta si CI pasa exitosamente
  cd:
    needs: ci
    runs-on: ubuntu-latest
    if: github.ref == 'refs/heads/main'
    
    steps:
    - name: Descargar cÃ³digo
      uses: actions/checkout@v3
    
    # Simulamos un despliegue
    - name: Desplegar a producciÃ³n
      run: |
        echo "ğŸš€ Desplegando a producciÃ³n..."
        echo "ğŸ“ Archivos a desplegar:"
        ls -la *.html *.js
        echo "âœ… Â¡Despliegue completado!"
        echo "ğŸŒ Tu app estÃ¡ disponible en: https://mi-app.com"